# Урок по работе с аудио на Python для начинающих

## Название: "Ваш первый аудио-скрипт: Запись, воспроизведение и визуализация звука"

**Цель урока:** Познакомить с базовыми операциями работы со звуком: запись с микрофона, воспроизведение и простейший анализ.

**Необходимые знания:** Базовый синтаксис Python (установка библиотек, работа с функциями).

**Длительность:** 30-45 минут.

---

### 1. Подготовка: Установка необходимых библиотек

Первым делом установим две главные библиотеки для работы со звуком. Откройте терминал (командную строку) и выполните:

```bash
pip install sounddevice numpy scipy matplotlib
```

*   **`sounddevice`** - для записи и воспроизведения аудио в реальном времени.
*   **`numpy`** - для работы с аудиоданными как с массивами чисел.
*   **`scipy`** - для чтения и записи аудиофайлов.
*   **`matplotlib`** - для построения графиков (визуализации звуковой волны).

---

### 2. Теория на пальцах: Как компьютер представляет звук?

*   **Звук** - это волна. Комputer дискретизирует ее.
*   **Аудиофайл** (например, WAV) - это, по сути, просто массив чисел (**samples** - сэмплы).
*   **Частота дискретизации (sample rate)** - сколько раз в секунду мы "измеряем" звуковую волну. Стандартное значение: 44100 Гц (каждую секунду мы храним 44100 чисел).

**Простая аналогия:** Если представить звук как горный хребет, то частота дискретизации - это то, как часто мы будем останавливаться, чтобы записать его высоту. Чем чаще останавливаемся, тем точнее карта.

---

### 3. Практика: Пишем код

#### Часть 1: Запись звука с микрофона

Создайте новый файл `audio_lesson.py`.

```python
import sounddevice as sd
from scipy.io.wavfile import write
import numpy as np

# Настройки записи
sample_rate = 44100  # Частота дискретизации (Гц)
duration = 5         # Длительность записи (секунды)

print("Запись началась... Говорите!")
# Записываем аудио
# `sd.rec` возвращает массив NumPy
recording = sd.rec(
    int(duration * sample_rate),  # Общее количество сэмплов
    samplerate=sample_rate,
    channels=1,                   # 1 канал (моно), 2 - стерео
    dtype=np.int16                # Тип данных для сэмплов
)

# Ждем, пока запись завершится
sd.wait()
print("Запись завершена!")

# Сохраняем запись в файл
filename = "my_recording.wav"
write(filename, sample_rate, recording)

print(f"Файл сохранен как {filename}")
```
**Запустите скрипт и скажите что-нибудь в микрофон!** В папке с проектом появится файл `my_recording.wav`.

#### Часть 2: Воспроизведение записанного звука

Добавим код для проигрывания только что записанного файла.

```python
from scipy.io.wavfile import read

# Читаем сохраненный файл
sample_rate, audio_data = read("my_recording.wav")

print("Воспроизведение...")
# Воспроизводим массив с аудиоданными
sd.play(audio_data, sample_rate)
# Ждем окончания воспроизведения
sd.wait()
print("Воспроизведение завершено.")
```

#### Часть 3: Визуализация звуковой волны

Давайте "увидим" наш звук. Построим график амплитуды сигнала от времени.

```python
import matplotlib.pyplot as plt

# Создаем массив временных отметок
time = np.arange(0, len(audio_data)) / sample_rate

# Строим график
plt.figure(figsize=(10, 4))
plt.plot(time, audio_data, linewidth=0.5)
plt.title("Визуализация аудиозаписи")
plt.xlabel("Время (секунды)")
plt.ylabel("Амплитуда")
plt.grid(True)
# Сохраняем картинку
plt.savefig('audio_waveform.png')
plt.show()
```
Запустите скрипт снова. После воспроизведения откроется окно с графиком вашего голоса!

---

### 4. Дополнительное задание (для самых любознательных)

Попробуйте изменить код, чтобы:
1.  **Записать стерео-звук** (2 канала). Подсказка: параметр `channels=2`.
2.  **Записать тише.** Подсказка: попробуйте умножить массив `recording` на число меньше 1 (например, `0.5`) перед сохранением: `write(filename, sample_rate, (recording * 0.5).astype(np.int16))`. Не забудьте преобразовать тип данных обратно в `int16`!
3.  **Воспроизвести файл с ускорением в 2 раза.** Подсказка: воспроизведите его с частотой дискретизации `sample_rate * 2`.

---

### 5. Итоги и куда двигаться дальше

Сегодня вы научились:
1.  Записывать звук с микрофона.
2.  Сохранять его в файл.
3.  Считывать и воспроизводить файл.
4.  Визуализировать звуковую волну.

**Что учить дальше:**
*   **Библиотека `pydub`:** Очень удобна для простых операций с аудио (нарезка, склейка, изменение громкости, форматов).
*   **Библиотека `librosa`:** Флагманская библиотека для продвинутого анализа аудио и работы с задачами Machine Learning (распознавание речи, музыки).
*   **Создание простого аудиоплеера** с помощью библиотеки `tkinter` для GUI.
*   **Генерация звуков** (синусоиды, пианино) с помощью `numpy` и `sounddevice`.

Главное - экспериментируйте! Попробуйте записать разные звуки, посмотрите, как выглядят их графики. Удачи в изучении мира аудио с Python